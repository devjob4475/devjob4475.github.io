<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏π‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡∏ß‡∏µ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ü‡∏≠‡∏ô‡∏ï‡πå -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;700&display=swap" rel="stylesheet">
<!-- VIDEO.JS CSS + JS -->
<link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
<script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
<script src="https://www.youtube.com/iframe_api"></script>

  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
   <style>

    *{
        font-family: 'Noto Sans Thai', sans-serif;

    }
body {
  margin: 0;
  font-family: 'Noto Sans Thai', sans-serif;
  background: #111;
  color: #fff;
}


    h1 {
      text-align: center;
      margin: 20px 0;
    }

    * {
      box-sizing: border-box;
    }

    .form-container {
      max-width: 400px;
      margin: 20px auto;
      padding: 20px;
      background: #222;
      border-radius: 10px;
      width: 90%;
    }

    .form-container input,
    .form-container button {
      width: 100%;
      padding: 12px;
      margin-bottom: 12px;
      border-radius: 6px;
      border: none;
      font-size: 1rem;
    }

    .form-container button {
      background: #0066dd;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
    }

    .form-container input[type="file"] {
      background: none;
      border: 1px dashed #444;
      color: #aaa;
    }

    #list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 16px;
      padding: 20px;
    }

    .channel-card-box {
      background: #1c1c1c;
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .channel-card-box:hover {
      transform: scale(1.03);
    }

    .channel-thumbnail {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      background-color: #000;
  border-radius: 10px 10px 0 0; /* ‚úÖ ‡∏ö‡∏ô‡πÇ‡∏Ñ‡πâ‡∏á ‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏° */
      overflow: hidden;
    }

.channel-thumbnail img {
  width: 100%;
  height: 200px;
  object-fit: contain; /* ‚úÖ ‡πÑ‡∏°‡πà‡∏¢‡∏∑‡∏î‡∏†‡∏≤‡∏û */
  object-position: center; /* ‚úÖ ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á-‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô */
  background-color: #000; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏î‡∏≥ */
}


  .channel-name {
  background-color: #3a3a3a;
  color: #fff;
  text-align: center;
  font-size: 0.9rem;
  padding: 8px;
  width: 100%;
  word-break: break-word;
  line-height: 1.3;
  height: 48px; /* üü° fix ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô */
  display: flex;
  justify-content: center;
  align-items: center;
  transition: color 0.3s;
  overflow: hidden;
}

.channel-card-box:hover .channel-name {
  color: #fff;
}



    .player-container {
      max-width: 800px;
      margin: 20px auto;
      display: none;
    }

    .player-container video,
    .player-container iframe {
      width: 100%;
      border-radius: 10px;
      
    }

    .video-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  z-index: 9999;
  display: flex;
  justify-content: center;
  align-items: center;
}

.modal-content {
  margin: auto;
  /* max-width: 800px; */
  width: 50%;

}


.modal-content video,
.modal-content iframe {
  width: 100%;
  aspect-ratio: 16 / 9;
  border-radius: 10px;
  text-align: center;
  display: block;
  background: #000;
}




.close-button {
  position: absolute;
  top: 10px;
  right: 10px;
  font-size: 1.8rem;
  background: #dc3545;
  color: white;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  text-align: center;
  line-height: 34px;
  cursor: pointer;
  z-index: 10;
  box-shadow: 0 2px 8px rgba(0,0,0,0.4);
}

    #list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 16px;
      padding: 20px;
    }

  /* #recentList, #popularList {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    justify-content: center;
  } */
#recentList .channel-card-box,
#popularList .channel-card-box {
  flex: 0 0 200px;
  max-width: 200px;
  min-width: 200px;
}


  .carousel-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 10px auto;
  max-width: 800px;
}

.carousel {
  display: flex;
  flex-wrap: nowrap; /* ‚úÖ ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å ‡∏´‡πâ‡∏≤‡∏° wrap */
  gap: 16px;
  overflow-x: auto;
  scroll-behavior: smooth;
  padding: 10px 0;
  max-width: 660px;
}


.carousel::-webkit-scrollbar {
  display: none;
}

.carousel-btn {
  background: none;
  color: white;
  font-size: 2rem;
  border: none;
  cursor: pointer;
  z-index: 1;
  padding: 5px 10px;
}

.carousel-btn.left {
  margin-right: 5px;
}
.carousel-btn.right {
  margin-left: 5px;
}

.nav-button {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 60px;
  height: 60px;
  background: rgba(255, 255, 255, 0.1);
  color: white;
  font-size: 2rem;
  border: none;
  cursor: pointer;
  border-radius: 50%;
  z-index: 2;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: opacity 0.5s ease;
  opacity: 0;
  pointer-events: none;
}

.video-modal.show-nav .nav-button {
  opacity: 1;
  pointer-events: auto;
}

.nav-button:hover {
  background: rgba(255, 255, 255, 0.3);
}

.nav-button.left {
  left: 20px;
}

.nav-button.right {
  right: 20px;
}



@media (max-width: 768px) {
  .nav-button {
    position: static;
    transform: none;
    margin: 10px;
    font-size: 1.5rem;
    width: auto;
    height: auto;
    background: #444;
    padding: 8px 16px;
    border-radius: 8px;
  }

  .nav-controls {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
  }
}


.favorite-btn {
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  transition: transform 0.2s;
}
.favorite-btn.active {
  transform: scale(1.3);
}

.channel-actions {
  display: flex;
  justify-content: center;
  gap: 10px;
  padding: 12px;
  background: #1a1a1a;
  border-top: 1px solid #333;
}

.action-btn {
  width: 42px;
  height: 42px;
  border: none;
  border-radius: 50%;
  font-size: 1.3rem;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
}

.action-btn:hover {
  transform: scale(1.1);
}

.edit-btn {
  background-color: #ffc107;
  color: #111;
}

.delete-btn {
  background-color: #dc3545;
  color: #fff;
}

.favorite-btn {
  background-color: #2d2d2d;
  color: #fff;
  font-size: 1.3rem;
}

.favorite-btn.active {
  color: #ff4d4f;
  transform: scale(1.2);
}

#scrollButtons {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 9999;
  display: flex;
  gap: 12px;
}

#scrollButtons button {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(8px);
  color: white;
  cursor: pointer;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
  display: none;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  padding: 0;
}
#scrollButtons button:hover {
  background: rgba(0, 102, 221, 0.8);
}
#scrollButtons svg {
  display: block;
  margin: auto;
}

.episode-btn {
  background: #0066dd;
  color: #fff;
  font-weight: bold;
  border: none;
  border-radius: 8px;
  padding: 10px 16px;
  font-size: 0.95rem;
  cursor: pointer;
  transition: background 0.2s, transform 0.2s;
  box-shadow: 0 3px 8px rgba(0, 102, 221, 0.4);
}

.episode-btn:hover {
  background: #3388ff;
  transform: translateY(-2px);
}

.episode-btn:active {
  background: #0052b1;
  transform: scale(0.98);
}

/* ‚úÖ Fullscreen ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠‡∏à‡∏£‡∏¥‡∏á */
.video-js.vjs-fullscreen {
  width: 100vw !important;
  height: 100vh !important;
  top: 0;
  left: 0;
  position: fixed;
  border-radius: 0 !important;
}

.vjs-tech {
  object-fit: contain; /* ‡∏´‡∏£‡∏∑‡∏≠ cover ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏Ç‡∏≠‡∏ö */
}


#searchSuggestions {
  display: none;
  background: #222;
  border-radius: 0 0 8px 8px;
  overflow: hidden;
  max-height: 300px;
  overflow-y: auto;
}

.delete-top-btn {
  position: absolute;
  top: 6px;
  right: 6px;
  background: #dc3545;
  color: white;
  border: none;
  border-radius: 50%;
  width: 28px;
  height: 28px;
  font-size: 1.2rem;
  line-height: 26px;
  text-align: center;
  cursor: pointer;
  z-index: 10;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}
.delete-top-btn:hover {
  background: #ff4d4d;
}

.episode-btn.active {
  background: #ffcc00;
  color: #000;
  font-weight: bold;
}

.episode-btn.watched {
  background: #888 !important;
  color: #fff !important;
  opacity: 0.7;
}


.episode-btn.now-playing {
  position: relative;
  background: #ffe600;
  color: #000;
  font-weight: bold;
}

/* ‚úÖ ‡πÅ‡∏Å‡πâ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ö‡∏ö‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏û‡∏≠‡∏î‡∏µ */
.episode-btn.now-playing::after {
  content: '';
  position: absolute;
  top: -20px; /* ‡∏¢‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏π‡∏á‡∏à‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏° */
  left: 50%;
  transform: translateX(-50%);
  width: 32px;
  height: 32px;
  background-image: url('https://media.tenor.com/hlKEXPvlX48AAAAi/loading-loader.gif');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  z-index: 10;
}

.episode-item {
  flex: 0 0 calc(50% - 10px); /* ‡πÅ‡∏ö‡πà‡∏á 2 ‡∏ä‡πà‡∏≠‡∏á */
  min-width: 240px; /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ */
}
#episodeList {
  display: flex;
  flex-direction: column;   /* ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≠‡∏ô‡πÉ‡∏ô‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
  gap: 10px;
  margin: 12px 0;
  max-height: 180px;        /* ‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏î‡πâ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2 ‡∏ï‡∏≠‡∏ô */
  overflow-y: auto; 
  cursor: pointer;        /* ‡πÄ‡∏û‡∏¥‡πà‡∏° scrollbar */
}


.episode-item:hover {
  background: #333;
}

.episode-item img {
  width: 120px;
  height: 68px;
  object-fit: cover;
  border-radius: 4px;
}

.episode-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.episode-title {
  font-weight: bold;
  font-size: 1rem;
  margin-bottom: 4px;
}

.episode-desc {
  font-size: 0.9rem;
  color: #aaa;
}

.episode-item.active {
  background: #444;
}

.episode-item.watched {
  opacity: 0.6;
}


.episode-item {
  position: relative; /* ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ badge ‡∏≠‡∏¢‡∏π‡πà‡∏°‡∏∏‡∏° */
    padding: 6px 10px; /* ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° padding ‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö */

}

.episode-item.watched::after {
  content: "‚úî ‡∏î‡∏π‡πÅ‡∏•‡πâ‡∏ß";
  position: absolute;
  top: 6px;
  right: 6px;
  background: #22c55e; /* ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏™‡∏î */
  color: #000;
  font-size: 0.75rem;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 4px;
}

#episodeList::-webkit-scrollbar {
  height: 6px;
}
#episodeList::-webkit-scrollbar-thumb {
  background: #555;
  border-radius: 4px;
}




  </style>
</head>
<body>

  <h1>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</h1>

  <div class="form-container">
    <select id="typeSelector" onchange="toggleInputType()" style="width:100%;padding:12px;margin-bottom:12px;border-radius:6px;font-size:1rem;">
  <option value="tv">üì∫ ‡∏ä‡πà‡∏≠‡∏á TV</option>
  <option value="series">üé¨ ‡∏ã‡∏µ‡∏£‡∏µ‡∏™‡πå‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏≠‡∏ô</option>
</select>

    <input type="text" id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏≠‡∏á" />
    <input type="text" id="logo" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û" />
<!-- ‡πÅ‡∏ó‡∏ô input ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á URL ‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß -->
<!-- URL ‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß -->
<input type="text" id="url" placeholder="URL ‡∏ä‡πà‡∏≠‡∏á (m3u8 ‡∏´‡∏£‡∏∑‡∏≠ iframe)" />

<!-- ‡∏´‡∏•‡∏≤‡∏¢ EP -->
<div id="episodeInputs" style="display:none;">
  <div class="episode-row" style="display:flex; gap:5px; margin-bottom:10px;">
  <input type="number" placeholder="EP" class="ep-number" style="width:20%;" />
  <input type="text" placeholder="URL ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ" class="ep-url" style="flex: 1;" />
</div>

</div>
<button id="addEpBtn" onclick="addEpisodeInput()" style="display:none;margin-bottom: 10px;">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏° EP</button>

<button id="saveBtn" onclick="addChannel()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á</button>
    <button onclick="exportChannels()">üì§ Export ‡∏ä‡πà‡∏≠‡∏á</button>
    <input type="file" id="importFile" accept=".json" onchange="importChannels()" />
  </div>

  <input type="text" id="search" placeholder="üîé ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡πà‡∏≠‡∏á..." oninput="loadChannels()" style="max-width:400px;width:90%;margin:10px auto;display:block;padding:10px;border-radius:8px;border:none;font-size:1rem;" />
<div id="searchContainer" style="position: relative; max-width: 400px; margin: 0 auto;">
  <div id="searchSuggestions" style="
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: #222;
    border-radius: 0 0 8px 8px;
    z-index: 9999;
    display: none;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  "></div>
</div>



  <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö -->
<h2 style="text-align:center">‚ù§Ô∏è ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö</h2>
<div class="carousel-wrapper">
  <button class="carousel-btn left" onclick="scrollCarousel('favoriteList', -1)">‚ùÆ</button>
  <div id="favoriteList" class="carousel"></div>
  <button class="carousel-btn right" onclick="scrollCarousel('favoriteList', 1)">‚ùØ</button>
</div>

  <!-- ‡∏î‡∏π‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î -->
<h2 style="text-align:center">üìå ‡∏î‡∏π‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h2>
<div class="carousel-wrapper">
  <button class="carousel-btn left" onclick="scrollCarousel('recentList', -1)">‚ùÆ</button>
  <div id="recentList" class="carousel"></div>
  <button class="carousel-btn right" onclick="scrollCarousel('recentList', 1)">‚ùØ</button>
</div>



<!-- ‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏° -->
<h2 style="text-align:center">üî• ‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°</h2>
<div class="carousel-wrapper">
  <button class="carousel-btn left" onclick="scrollCarousel('popularList', -1)">‚ùÆ</button>
  <div id="popularList" class="carousel"></div>
  <button class="carousel-btn right" onclick="scrollCarousel('popularList', 1)">‚ùØ</button>
</div>



  <h2 style="text-align:center">üì∫ ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
  <div id="list"></div>

  <div id="videoModal" class="video-modal" style="display: none;">
    <div class="modal-content">
        <h2 id="currentTitle" style="color:white; text-align:center; margin:10px 0;"></h2>
        

<div id="episodeList" style="display: flex; flex-wrap: wrap; gap: 10px; margin: 12px 0;"></div>

      <span class="close-button" onclick="closeModal()">√ó</span>
<div class="nav-controls">
  <button id="prevChannelBtn" class="nav-button left">‚ùÆ</button>
  <button id="nextChannelBtn" class="nav-button right">‚ùØ</button>
</div>


      <!-- <video id="video" controls autoplay style="display:none;"></video> -->
       <video
  id="video"
  class="video-js vjs-default-skin"
  controls
  autoplay
  playsinline
  preload="auto"
  style="display: none; width: 100%; border-radius: 10px;">
</video>

      <iframe id="iframe" style="display: none;" frameborder="0" allowfullscreen></iframe>
      <div id="youtube-player" style="display: none; width: 100%; aspect-ratio: 16 / 9; border-radius: 10px;"></div>

    </div>
  </div>

  <script>
    const nameEl = document.getElementById('name');
    const logoEl = document.getElementById('logo');
    const urlEl = document.getElementById('url');
    const listEl = document.getElementById('list');
    const video = document.getElementById('video');
    const iframe = document.getElementById('iframe');
    const recentListEl = document.getElementById('recentList');
    const popularListEl = document.getElementById('popularList');
    let isEditing = false;
let editingIndex = null;

let youtubePlayer = null;
let youtubeProgressInterval = null;

function getYoutubeProgressMap() {
  return JSON.parse(localStorage.getItem('yt-progress') || '{}');
}

function saveYoutubeProgress(id, time, duration) {
  const map = getYoutubeProgressMap();
  map[id] = { time, duration };
  localStorage.setItem('yt-progress', JSON.stringify(map));
}

function getYoutubeProgress(id) {
  const map = getYoutubeProgressMap();
  return map[id]?.time || 0;
}

function removeYoutubeProgress(id) {
  const map = getYoutubeProgressMap();
  delete map[id];
  localStorage.setItem('yt-progress', JSON.stringify(map));
}

function initYouTubePlayer(videoId, startTime = 0) {
  const ytDiv = document.getElementById('youtube-player');
  ytDiv.innerHTML = ''; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°

  youtubePlayer = new YT.Player('youtube-player', {
    videoId,
    playerVars: {
      autoplay: 1,
      controls: 1,
      start: Math.floor(startTime || 0),
      mute: 0,
      rel: 0
    },
    events: {
      onReady: (event) => event.target.playVideo(),
      onStateChange: (event) => {
        if (event.data === YT.PlayerState.ENDED) removeYoutubeProgress(videoId);
      }
    }
  });

  if (youtubeProgressInterval) clearInterval(youtubeProgressInterval);
  youtubeProgressInterval = setInterval(() => {
    if (youtubePlayer && youtubePlayer.getCurrentTime) {
      const current = youtubePlayer.getCurrentTime();
      const duration = youtubePlayer.getDuration();
      if (current && duration) {
        saveYoutubeProgress(videoId, current, duration);
      }
    }
  }, 5000);
}



    function addEpisodeInput() {
  const row = document.createElement('div');
  row.className = 'episode-row';
  row.innerHTML = `
    <input type="number" placeholder="EP" class="ep-number" style="width:20%;" />
    <input type="text" placeholder="URL ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ" class="ep-url" style="width:75%;" />
  `;
  document.getElementById('episodeInputs').appendChild(row);
}

function exportChannels() {
      const channels = JSON.parse(localStorage.getItem('channels') || '[]');
      const blob = new Blob([JSON.stringify(channels, null, 2)], { type: 'application/json' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'channels-export.json';
      a.click();
    }
// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏Ñ‡∏¢‡∏î‡∏π‡∏à‡∏ö
function markAsWatched(url) {
  const watched = JSON.parse(localStorage.getItem('watchedFlags') || '{}');
  watched[url] = true;
  localStorage.setItem('watchedFlags', JSON.stringify(watched));
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÄ‡∏Ñ‡∏¢‡∏î‡∏π‡∏à‡∏ö
function isWatched(url) {
  const watched = JSON.parse(localStorage.getItem('watchedFlags') || '{}');
  return !!watched[url];
}

function renderEpisodeList(episodes, currentIndex = 0, logo) {
  const container = document.getElementById('episodeList');
  container.innerHTML = '';

  episodes.forEach((ep, idx) => {
    const div = document.createElement('div');
    div.className = 'episode-item';
    if (idx === currentIndex) div.classList.add('active');
    if (isWatched(ep.url)) div.classList.add('watched');

    div.onclick = () => {
      playEpisode(ep.url, episodes, idx);
renderEpisodeList(episodes, idx, logo);
    };

    div.innerHTML = `
      <img src="${logo}" alt="EP ${ep.ep}" onerror="this.src='https://placehold.co/120x68?text=EP+${ep.ep}'">
      <div class="episode-info">
        <div class="episode-title">EP ${ep.ep}</div>
        <div class="episode-desc">‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà ${ep.ep} - ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π</div>
      </div>
    `;

    container.appendChild(div);
  });
}




    function getChannels() {
      return JSON.parse(localStorage.getItem('channels') || '[]');
    }

    function getPopularCounts() {
      return JSON.parse(localStorage.getItem('channelViews') || '{}');
    }

    function getRecentChannels() {
      return JSON.parse(localStorage.getItem('recentChannels') || '[]');
    }

    function getFavorites() {
  return JSON.parse(localStorage.getItem('favoriteChannels') || '[]');

}

function toggleInputType() {
  const type = document.getElementById('typeSelector').value;
  const urlInput = document.getElementById('url');
  const episodeBlock = document.getElementById('episodeInputs');
  const addEpBtn = document.getElementById('addEpBtn');

  if (type === 'tv') {
    urlInput.style.display = 'block';
    episodeBlock.style.display = 'none';
    addEpBtn.style.display = 'none';
  } else {
    urlInput.style.display = 'none';
    episodeBlock.style.display = 'block';
    addEpBtn.style.display = 'inline-block';
  }
}


function toggleFavorite(i) {
  let favs = getFavorites();
  if (favs.includes(i)) {
    favs = favs.filter(x => x !== i);
  } else {
    favs.unshift(i);
  }
  localStorage.setItem('favoriteChannels', JSON.stringify(favs));

  // üîÅ Refresh UI ‡∏ó‡∏∏‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
  renderFavorites();
  renderPopular();
  renderRecent();
  loadChannels(); // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö All list
}



function addChannel() {
  const name = nameEl.value.trim();
  const logo = logoEl.value.trim();
  const type = document.getElementById('typeSelector').value;

  if (!name || !logo) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡πÇ‡∏•‡πÇ‡∏Å‡πâ");

  const channels = getChannels();
  let channelData = { name, logo };

  if (type === 'tv') {
    const url = document.getElementById('url').value.trim();
    if (!url) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å URL ‡∏ä‡πà‡∏≠‡∏á");
    channelData.url = url;
  } else {
    const episodeRows = document.querySelectorAll('.episode-row');
    const episodes = [];
    for (const row of episodeRows) {
      const ep = parseInt(row.querySelector('.ep-number').value);
      const url = row.querySelector('.ep-url').value.trim();
      if (ep && url) episodes.push({ ep, url });
    }
    if (episodes.length === 0) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ï‡∏≠‡∏ô");
    channelData.episodes = episodes;
  }

  if (isEditing && editingIndex !== null) {
    channels[editingIndex] = { ...channels[editingIndex], ...channelData };
    isEditing = false;
    editingIndex = null;
document.getElementById('saveBtn').textContent = "‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á";
  } else {
    channels.push(channelData);
  }

  localStorage.setItem('channels', JSON.stringify(channels));

  // reset form
  nameEl.value = '';
  logoEl.value = '';
  document.getElementById('url').value = '';
  document.getElementById('episodeInputs').innerHTML = '';
  addEpisodeInput();
  loadChannels();
}

function removeFromRecent(i) {
  let recent = getRecentChannels().filter(id => id !== i);
  localStorage.setItem('recentChannels', JSON.stringify(recent));
  renderRecent();
}


function getYouTubeTitleFromCache(url) {
  const cache = JSON.parse(sessionStorage.getItem('ytTitleCache') || '{}');
  return cache[url] || null;
}

function setYouTubeTitleToCache(url, title) {
  const cache = JSON.parse(sessionStorage.getItem('ytTitleCache') || '{}');
  cache[url] = title;
  sessionStorage.setItem('ytTitleCache', JSON.stringify(cache));
}

function fetchAndCacheYouTubeTitle(url, callback) {
  const oembedUrl = `https://www.youtube.com/oembed?url=${encodeURIComponent(url)}&format=json`;
  fetch(oembedUrl)
    .then(res => res.json())
    .then(data => {
      if (data?.title) {
        setYouTubeTitleToCache(url, data.title);
        callback(data.title);
      } else {
        callback(null);
      }
    })
    .catch(() => callback(null));
}

function loadChannels() {
  const searchValue = document.getElementById('search')?.value?.toLowerCase() || '';
  const suggestionsEl = document.getElementById('searchSuggestions');
  const channels = getChannels();

  listEl.innerHTML = '';
  suggestionsEl.innerHTML = '';
  let found = 0;

  let hasPendingYouTube = false;

  channels.forEach((ch, i) => {
    let displayName = ch.name?.toLowerCase() || '';

    // ‚úÖ ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô YouTube ‚Üí ‡πÉ‡∏ä‡πâ title ‡∏à‡∏≤‡∏Å cache (‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≠ fetch)
    if (ch.url && (ch.url.includes('youtube.com') || ch.url.includes('youtu.be'))) {
      const ytTitle = getYouTubeTitleFromCache(ch.url);
      if (ytTitle) {
        displayName = ytTitle.toLowerCase();
      } else {
        // ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ title ‚Üí ‡∏î‡∏∂‡∏á‡πÅ‡∏•‡∏∞ reload ‡πÉ‡∏´‡∏°‡πà
        hasPendingYouTube = true;
        fetchAndCacheYouTubeTitle(ch.url, () => loadChannels());
      }
    }

    // ‚úÖ ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å
    if (!searchValue || displayName.includes(searchValue)) {
      const div = renderChannelCard(ch, i);
      listEl.appendChild(div);
      found++;
    }

    // ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á suggestion (autocomplete)
    if (searchValue && displayName.includes(searchValue)) {
      const item = document.createElement('div');
      item.style.display = 'flex';
      item.style.alignItems = 'center';
      item.style.padding = '8px 12px';
      item.style.cursor = 'pointer';
      item.style.borderBottom = '1px solid #333';
      item.style.transition = 'background 0.2s';

      item.onmouseenter = () => item.style.background = '#333';
      item.onmouseleave = () => item.style.background = 'transparent';

      item.onclick = () => {
        document.getElementById('search').value = displayName;
        suggestionsEl.style.display = 'none';
        watchChannel(i);
      };

    // ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô YouTube ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
let thumbnail = ch.logo;
if (ch.url && (ch.url.includes('youtube.com') || ch.url.includes('youtu.be'))) {
  const videoId = extractYouTubeID(ch.url);
  if (videoId) {
    thumbnail = `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
  }
}

item.innerHTML = `
  <img src="${thumbnail}" alt="${displayName}" style="width: 32px; height: 32px; border-radius: 4px; margin-right: 10px; object-fit: cover;" onerror="this.src='https://cdn-icons-png.flaticon.com/512/2748/2748558.png'">
  <span style="color: white; font-size: 0.95rem;">${displayName}</span>
`;


      suggestionsEl.appendChild(item);
    }
  });

  suggestionsEl.style.display = (searchValue && suggestionsEl.children.length > 0) ? 'block' : 'none';

  renderPopular();
  renderRecent();
  renderFavorites();

  // ‚ùó ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô reload loop
  if (hasPendingYouTube) {
    console.log('‚è≥ Fetching YouTube titles...');
  }
}

    function renderFavorites() {
  const channels = getChannels();
  const favs = getFavorites();
  const favoriteListEl = document.getElementById('favoriteList');
  favoriteListEl.innerHTML = '';
  const seen = new Set();

  favs.forEach((id, idx) => {
    if (!seen.has(id) && channels[id]) {
      favoriteListEl.appendChild(renderChannelCard(channels[id], id, idx));
      seen.add(id);
    }
  });
}

function renderRecent() {
  const channels = getChannels();
  const recent = getRecentChannels();
  recentListEl.innerHTML = '';
  const seen = new Set();

  for (let j = 0; j < recent.length && seen.size < 5; j++) {
    const id = recent[j];
    if (!seen.has(id) && channels[id]) {
      recentListEl.appendChild(renderChannelCard(channels[id], id, j, true)); // ‚úÖ showDeleteTopBtn = true
      seen.add(id);
    }
  }
}



function renderChannelCard(ch, i, indexInList = null, showDeleteTopBtn = false) {
  const favs = getFavorites();
  const isFav = favs.includes(i);
  const wrapper = document.createElement('div');
  wrapper.className = 'ranked-card-wrapper';

  // wrapper.innerHTML = `
  //   <div class="channel-card-box">
  //     <div class="channel-thumbnail" style="position: relative;">
  //       <img src="${ch.logo}" alt="${ch.name}" 
  //            onerror="this.onerror=null; this.src='https://cdn-icons-png.flaticon.com/512/2748/2748558.png';"
  //            onclick="watchChannel(${i})">
  //       <div class="channel-name" title="${ch.name}">
  //         ${ch.name.length > 25 ? ch.name.slice(0, 25) + '‚Ä¶' : ch.name}
  //       </div>
  //       ${showDeleteTopBtn ? `<button class="delete-top-btn" onclick="removeFromRecent(${i})">√ó</button>` : ''}
  //     </div>
  //     <div class="channel-actions">
  //       <button class="action-btn edit-btn" onclick="editChannel(${i})">‚úèÔ∏è</button>
  //       <button class="action-btn delete-btn" onclick="deleteChannel(${i})">üóëÔ∏è</button>
  //       <button class="action-btn favorite-btn ${isFav ? 'active' : ''}" onclick="toggleFavorite(${i})">
  //         ${isFav ? '‚ù§Ô∏è' : 'ü§ç'}
  //       </button>
  //     </div>
  //   </div>
  // `;

 let thumbnail = ch.logo;

// ‚úÖ ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô YouTube
let isYouTube = false;
if (ch.url && (ch.url.includes('youtube.com') || ch.url.includes('youtu.be'))) {
  const videoId = extractYouTubeID(ch.url);
  if (videoId) {
    thumbnail = `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
    isYouTube = true;
  }
}

wrapper.innerHTML = `
  <div class="channel-card-box">
    <div class="channel-thumbnail" style="position: relative;">
      <img src="${thumbnail}" alt="${ch.name}" 
           onerror="this.onerror=null; this.src='https://cdn-icons-png.flaticon.com/512/2748/2748558.png';"
           onclick="watchChannel(${i})">
      <div class="channel-name" title="${ch.name}" id="channel-name-${i}">
        ${isYouTube ? '‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏ä‡∏∑‡πà‡∏≠...' : (ch.name.length > 25 ? ch.name.slice(0, 25) + '‚Ä¶' : ch.name)}
      </div>
      ${showDeleteTopBtn ? `<button class="delete-top-btn" onclick="removeFromRecent(${i})">√ó</button>` : ''}
    </div>
    <div class="channel-actions">
      <button class="action-btn edit-btn" onclick="editChannel(${i})">‚úèÔ∏è</button>
      <button class="action-btn delete-btn" onclick="deleteChannel(${i})">üóëÔ∏è</button>
      <button class="action-btn favorite-btn ${isFav ? 'active' : ''}" onclick="toggleFavorite(${i})">
        ${isFav ? '‚ù§Ô∏è' : 'ü§ç'}
      </button>
    </div>
  </div>
`;

// ‚úÖ ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô YouTube ‡πÉ‡∏´‡πâ fetch ‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï DOM
if (isYouTube) {
  const oembedUrl = `https://www.youtube.com/oembed?url=${encodeURIComponent(ch.url)}&format=json`;
  fetch(oembedUrl)
    .then(res => res.json())
    .then(data => {
      const nameEl = wrapper.querySelector(`#channel-name-${i}`);
      if (nameEl && data?.title) {
        nameEl.textContent = data.title.length > 25 ? data.title.slice(0, 25) + '‚Ä¶' : data.title;
        nameEl.title = data.title;
      }
    })
    .catch(() => {
      const nameEl = wrapper.querySelector(`#channel-name-${i}`);
      if (nameEl) nameEl.textContent = 'YouTube Video';
    });
}


  // üî¥ Progress Bar ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á
// üî¥ Progress Bar ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á
// üî¥ Progress Bar ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á
if (indexInList !== null && ch.url && ch.url.includes('.m3u8')) {
  const progressTime = getProgress(ch.url);
  const duration = getProgressDuration(ch.url);

  if (progressTime > 5 && duration > 30) {
    const percent = Math.min(100, Math.round((progressTime / duration) * 100));

    const bar = document.createElement('div');
    bar.style.height = '4px';
    bar.style.width = `${percent}%`;
    bar.style.background = '#e50914';
    bar.style.position = 'absolute';
    bar.style.bottom = '0';
    bar.style.left = '0';
    bar.style.transition = 'width 0.3s';

    const box = wrapper.querySelector('.channel-card-box');
    box.style.position = 'relative';
    box.appendChild(bar);
  }
}
if (indexInList !== null && ch.url && (ch.url.includes('youtube.com') || ch.url.includes('youtu.be'))) {
  const videoId = extractYouTubeID(ch.url);
  const ytProgress = getYoutubeProgressMap()[videoId];

  if (ytProgress && ytProgress.time > 5 && ytProgress.duration > 30) {
    const percent = Math.min(100, Math.round((ytProgress.time / ytProgress.duration) * 100));

    const bar = document.createElement('div');
    bar.style.height = '4px';
    bar.style.width = `${percent}%`;
    bar.style.background = '#e50914';
    bar.style.position = 'absolute';
    bar.style.bottom = '0';
    bar.style.left = '0';
    bar.style.transition = 'width 0.3s';

    const box = wrapper.querySelector('.channel-card-box');
    box.style.position = 'relative';
    box.appendChild(bar);
  }
}

  return wrapper;
}

    function scrollCarousel(id, direction) {
  const container = document.getElementById(id);
  const scrollAmount = 220 * direction; // ‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πå‡∏î + margin
  container.scrollBy({ left: scrollAmount, behavior: 'smooth' });
}

function deleteChannel(index) {
  if (!confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ?")) return;

  const channels = JSON.parse(localStorage.getItem('channels') || '[]');
  channels.splice(index, 1);
  localStorage.setItem('channels', JSON.stringify(channels));
  loadChannels();
}

function editChannel(index) {
  const channels = getChannels();
  const ch = channels[index];

  isEditing = true;
  editingIndex = index;

  nameEl.value = ch.name;
  logoEl.value = ch.logo;

  document.getElementById('typeSelector').value = ch.episodes ? 'series' : 'tv';
  toggleInputType();

  if (ch.episodes) {
    document.getElementById('episodeInputs').innerHTML = '';
    ch.episodes.forEach(ep => {
     const row = document.createElement('div');
row.className = 'episode-row';
row.style.display = 'flex'; // <--- ‚úÖ ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å
row.style.gap = '5px';
row.style.marginBottom = '10px';
row.innerHTML = `
  <input type="number" placeholder="EP" class="ep-number" style="width:20%;" value="${ep.ep}" />
  <input type="text" placeholder="URL ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ" class="ep-url" style="width:80%;" value="${ep.url}" />
`;

      document.getElementById('episodeInputs').appendChild(row);
    });
  } else {
    urlEl.value = ch.url || '';
  }

document.getElementById('saveBtn').textContent = "üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç";
window.scrollTo({ top: 0, behavior: 'smooth' });

}



function renderPopular() {
  const channels = getChannels();
  const views = getPopularCounts();
  const sorted = Object.keys(views)
    .map(Number) // ‚úÖ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏à‡∏£‡∏¥‡∏á
    .sort((a, b) => views[b] - views[a]);

  popularListEl.innerHTML = '';
  const seen = new Set();

  for (const id of sorted) {
    if (!seen.has(id) && channels[id]) {
      popularListEl.appendChild(renderChannelCard(channels[id], id));
      seen.add(id);
    }
    if (seen.size >= 5) break;
  }
}



function closeModal() {
  const modal = document.getElementById('videoModal');
  const iframe = document.getElementById('iframe');
// ‡∏õ‡∏¥‡∏î YouTube Player
resetPlayer()

  modal.style.display = 'none';

  // ‡∏õ‡∏¥‡∏î iframe
  if (iframe) {
    iframe.src = '';
    iframe.style.display = 'none';
  }

  // ‡∏õ‡∏¥‡∏î video.js player
  if (window.videojsPlayer) {
    window.videojsPlayer.pause();
    window.videojsPlayer.dispose();
    window.videojsPlayer = null;
  }

  // ‡∏õ‡∏¥‡∏î video tag ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏£‡∏ì‡∏µ‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà
  const videoEl = document.getElementById('video');
  if (videoEl) {
    videoEl.style.display = 'none';
  }

  // ‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ HLS.js
  if (window.hls) {
    window.hls.destroy();
    window.hls = null;
  }

  renderRecent();
  renderPopular();
}

let currentChannelIndex = null;

function extractYouTubeID(url) {
  const regex = /(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
  const match = url.match(regex);
  return match ? match[1] : '';
}


function watchChannel(index) {
  const ch = getChannels()[index];
const currentTitleEl = document.getElementById('currentTitle');

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô YouTube ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
if (ch.url && (ch.url.includes('youtube.com') || ch.url.includes('youtu.be'))) {
  currentTitleEl.textContent = '‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏ä‡∏∑‡πà‡∏≠...';
  const oembedUrl = `https://www.youtube.com/oembed?url=${encodeURIComponent(ch.url)}&format=json`;
  fetch(oembedUrl)
    .then(res => res.json())
    .then(data => {
      currentTitleEl.textContent = data?.title || 'YouTube Video';
    })
    .catch(() => {
      currentTitleEl.textContent = 'YouTube Video';
    });
} else {
  currentTitleEl.textContent = ch.name || '';
}

  if (ch.password) {
    const input = prompt(`üîí ‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏ä‡∏°\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô:`);
    if (input !== ch.password) {
      alert('‚ùå ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
      return;
    }
  }
  currentChannelIndex = index;

  const modal = document.getElementById('videoModal');
  modal.style.display = 'flex';
  showNavButtons();

  if (Array.isArray(ch.episodes)) {
    // ‚úÖ ‡∏´‡∏≤ EP ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏î‡∏π‡πÑ‡∏°‡πà‡∏à‡∏ö
      document.getElementById('episodeList').style.display = 'flex';

    let lastEpIndex = 0;
    for (let i = 0; i < ch.episodes.length; i++) {
      const epUrl = ch.episodes[i].url;
      const progress = getVideoProgress(epUrl);
      const duration = parseFloat(localStorage.getItem(`videoDuration:${epUrl}`)) || 0;

      if (duration > 30 && progress < duration - 5) {
        lastEpIndex = i;
        break; // ‡πÄ‡∏à‡∏≠ EP ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏î‡∏π‡πÑ‡∏°‡πà‡∏à‡∏ö ‡∏Å‡πá‡∏î‡∏π‡∏ï‡πà‡∏≠‡πÄ‡∏•‡∏¢
      }
    }

renderEpisodeList(ch.episodes, lastEpIndex, ch.logo);
    playEpisode(ch.episodes[lastEpIndex].url, ch.episodes, lastEpIndex);

  } else {
      document.getElementById('episodeList').style.display = 'none';

    renderEpisodeList([]);
// ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô Bein Sports 1 ‡πÉ‡∏´‡πâ‡πÑ‡∏õ Sniff ‡πÉ‡∏´‡∏°‡πà
if (ch.name === 'Bein Sports 1') {
  console.log('‚è≥ Sniff Bein Sports 1...');
  window.electronAPI.sniffDooball('epl-bein1').then((url) => {
    if (url) {
      console.log('‚úÖ ‡πÑ‡∏î‡πâ‡∏•‡∏¥‡∏á‡∏Å‡πå M3U8 ‡∏™‡∏î:', url);
      playEpisode(url);
    } else {
      alert('‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå M3U8 ‡∏™‡∏î');
    }
  });
} 
else if (ch.name === 'Bein Sports 3') {
  console.log('‚è≥ Sniff Bein Sports 3...');
  window.electronAPI.sniffDooball('epl-bein3').then((url) => {
    if (url) {
      console.log('‚úÖ ‡πÑ‡∏î‡πâ‡∏•‡∏¥‡∏á‡∏Å‡πå M3U8 ‡∏™‡∏î:', url);
      playEpisode(url);
    } else {
      alert('‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå M3U8 ‡∏™‡∏î');
    }
  });
} 
else if (ch.name === 'Mono Max 1') {
  console.log('‚è≥ Sniff Mono Max 1...');
  window.electronAPI.sniffDooball('th-monomax01').then((url) => {
    if (url) {
      console.log('‚úÖ ‡πÑ‡∏î‡πâ‡∏•‡∏¥‡∏á‡∏Å‡πå M3U8 ‡∏™‡∏î:', url);
      playEpisode(url);
    } else {
      alert('‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå M3U8 ‡∏™‡∏î');
    }
  });
} 
else if (ch.name === 'Mono Max 2') {
  console.log('‚è≥ Sniff Mono Max 2...');
  window.electronAPI.sniffDooball('th-monomax02').then((url) => {
    if (url) {
      console.log('‚úÖ ‡πÑ‡∏î‡πâ‡∏•‡∏¥‡∏á‡∏Å‡πå M3U8 ‡∏™‡∏î:', url);
      playEpisode(url);
    } else {
      alert('‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå M3U8 ‡∏™‡∏î');
    }
  });
} 
else if (ch.name === 'Mono29 HD') {
  console.log('‚è≥ Sniff Mono29 HD...');
  window.electronAPI.sniffDooball('hd-mono').then((url) => {
    if (url) {
      console.log('‚úÖ ‡πÑ‡∏î‡πâ‡∏•‡∏¥‡∏á‡∏Å‡πå M3U8 ‡∏™‡∏î:', url);
      playEpisode(url);
    } else {
      alert('‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå M3U8 ‡∏™‡∏î');
    }
  });
} 
else {
  playEpisode(ch.url);
}

  }

  // ‚úÖ track recent + popular
  let recent = getRecentChannels().filter(i => i !== index);
  recent.unshift(index);
  localStorage.setItem('recentChannels', JSON.stringify(recent.slice(0, 10)));

  const views = getPopularCounts();
  views[index] = (views[index] || 0) + 1;
  localStorage.setItem('channelViews', JSON.stringify(views));
}

function getVideoProgress(url) {
  const key = `videoProgress:${url}`;
  const time = parseFloat(localStorage.getItem(key));
  return !isNaN(time) ? time : 0;
}

function normalizeUrl(url) {
  // ‡∏ï‡∏±‡∏î query string ‡∏≠‡∏≠‡∏Å
  return url.split('?')[0];
}

// ‚úÖ Namespace Key
// ‚úÖ Namespace Key
const PROGRESS_KEY = 'videoProgressMap';

// ‚úÖ ‡πÇ‡∏´‡∏•‡∏î Progress Map
function loadProgressMap() {
  const raw = localStorage.getItem(PROGRESS_KEY);
  return raw ? JSON.parse(raw) : {};
}

// ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Progress Map
function saveProgressMap(map) {
  localStorage.setItem(PROGRESS_KEY, JSON.stringify(map));
}

// ‚úÖ ‡∏•‡∏ö Progress ‡∏Ç‡∏≠‡∏á URL ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
function removeProgress(url) {
  const map = loadProgressMap();
  delete map[url];
  saveProgressMap(map);
  console.log(`üóë Removed progress for: ${url}`);
}

// ‚úÖ ‡πÄ‡∏Å‡πá‡∏ö Progress ‡∏Ç‡∏≠‡∏á URL ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
function saveProgress(url, time, duration) {
  const map = loadProgressMap();
  map[url] = { time, duration };
  saveProgressMap(map);
  console.log(`üíæ Saved progress for: ${url} = ${time}/${duration}`);
}

// ‚úÖ ‡∏≠‡πà‡∏≤‡∏ô Progress ‡∏Ç‡∏≠‡∏á URL ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
function getProgress(url) {
  const map = loadProgressMap();
  return map[url]?.time || 0;
}

// ‚úÖ ‡∏≠‡πà‡∏≤‡∏ô Duration ‡∏Ç‡∏≠‡∏á URL ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
function getProgressDuration(url) {
  const map = loadProgressMap();
  return map[url]?.duration || 0;
}
function resetPlayer() {
  if (youtubeProgressInterval) clearInterval(youtubeProgressInterval);
  if (youtubePlayer) youtubePlayer.destroy?.();
  youtubePlayer = null;

  const ytDiv = document.getElementById('youtube-player');
  if (ytDiv) {
    ytDiv.innerHTML = '';
    ytDiv.style.display = 'none';
  }

  if (window.hls) {
    window.hls.destroy();
    window.hls = null;
  }

  if (window.videojsPlayer) {
    window.videojsPlayer.dispose();
    window.videojsPlayer = null;
  }

  const oldVideo = document.getElementById('video');
  if (oldVideo) oldVideo.remove();

  const iframe = document.getElementById('iframe');
  if (iframe) {
    iframe.src = '';
    iframe.style.display = 'none';
  }
}


// ‚úÖ main playEpisode function
function playEpisode(url, episodes = [], currentIndex = 0) {
  console.log('üé¨ playEpisode called', { url, currentIndex });
    resetPlayer(); // ‚úÖ ‡∏•‡πâ‡∏≤‡∏á player ‡πÄ‡∏î‡∏¥‡∏°‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà

  const isAvthCdnHls = /https:\/\/av-th\.xyz\/cdn\/hls\/[a-zA-Z0-9]+\/master\.txt/.test(url);

  const isYouTube = url.includes('youtube.com') || url.includes('youtu.be');
const isM3U8 = /\.m3u8(\?|$)/i.test(url);
  const isIframe = !isM3U8 && !isAvthCdnHls && (
    /\.(php)$/i.test(url) || /(player|iframe|\/video\/|\/play\/|embed)/i.test(url)
  );

  const iframe = document.getElementById('iframe');

  // ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤ fullscreen ‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
  const wasFullscreen = !!document.fullscreenElement;

  // üßπ ‡∏•‡πâ‡∏≤‡∏á player ‡πÄ‡∏î‡∏¥‡∏°
  if (window.hls) {
    console.log('üßπ Destroying HLS.js');
    window.hls.destroy();
    window.hls = null;
  }
  if (window.videojsPlayer) {
    console.log('üßπ Disposing videojs player');
    window.videojsPlayer.dispose();
    window.videojsPlayer = null;
  }
  const oldVideo = document.getElementById('video');
  if (oldVideo) {
    console.log('üßπ Removing old <video>');
    oldVideo.remove();
  }

  // ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á <video> ‡πÉ‡∏´‡∏°‡πà
  const newVideo = document.createElement('video');
  newVideo.id = 'video';
  newVideo.className = 'video-js vjs-default-skin';
  newVideo.setAttribute('controls', '');
  newVideo.setAttribute('autoplay', '');
  newVideo.setAttribute('playsinline', '');
  newVideo.setAttribute('webkit-playsinline', '');
  newVideo.style.width = '100%';
  newVideo.style.borderRadius = '10px';

  const modalContent = document.querySelector('.modal-content');
  modalContent.appendChild(newVideo);

  if (isYouTube) {
    console.log('‚ñ∂Ô∏è Playing YouTube');
newVideo.style.display = 'none';
iframe.style.display = 'none';

const ytContainer = document.getElementById('youtube-player');
ytContainer.style.display = 'block';
ytContainer.innerHTML = '';

const videoId = extractYouTubeID(url);
const saved = getYoutubeProgress(videoId);
initYouTubePlayer(videoId, saved);
    markAsWatched(url);


  } else if (isIframe && !isM3U8 && !isAvthCdnHls) {
    console.log('‚ñ∂Ô∏è Playing iframe');
    newVideo.style.display = 'none';
    iframe.style.display = 'block';
    iframe.src = url;
        markAsWatched(url);

  } else if (isM3U8 || isAvthCdnHls) {
    console.log('‚ñ∂Ô∏è Playing M3U8');
    iframe.style.display = 'none';
    newVideo.style.display = 'block';

    // ‚úÖ Video.js
    window.videojsPlayer = videojs(newVideo, {
      autoplay: true,
      controls: true,
      responsive: true,
      fluid: true,
      liveui: false,
      html5: {
        hls: {
          overrideNative: true
        }
      }
    });

    window.videojsPlayer.src({
      src: url,
      type: 'application/x-mpegURL'
    });

    window.videojsPlayer.ready(() => {
      const player = window.videojsPlayer;

      // player.on('loadedmetadata', () => {
      //   markAsWatched(url);
      //   const savedTime = getProgress(url);
      //   console.log(`‚è™ Loaded progress for ${url}: ${savedTime}`);
      //   if (!isNaN(savedTime) && savedTime > 5) {
      //     if (confirm(`‚è™ ‡∏î‡∏π‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`)) {
      //       player.currentTime(savedTime);
      //     }
      //   }
      // });

      player.on('loadedmetadata', () => {
  markAsWatched(url);
  const savedTime = getProgress(url);
  console.log(`‚è™ Loaded progress for ${url}: ${savedTime}`);

  if (!player.hasRestoredProgress && !isNaN(savedTime) && savedTime > 5) {
    if (confirm(`‚è™ ‡∏î‡∏π‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`)) {
      player.currentTime(savedTime);
    }
    player.hasRestoredProgress = true;
  }
});


      player.on('timeupdate', () => {
  const currentTime = player.currentTime();
  const duration = player.duration();

  // ‡∏ñ‡πâ‡∏≤ duration valid
  if (duration && duration > 0) {
    const percent = currentTime / duration;

    // ‡∏ñ‡πâ‡∏≤‡∏î‡∏π‡∏Ñ‡∏£‡∏ö 90% ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏î‡∏π‡∏à‡∏ö ‡∏•‡∏ö progress
    if (percent >= 0.9) {
      removeProgress(url);
      markAsWatched(url);
    }
    // ‡∏ñ‡πâ‡∏≤‡∏î‡∏π‡πÄ‡∏Å‡∏¥‡∏ô 10% ‡πÉ‡∏´‡πâ mark watched
    else if (percent >= 0.1) {
      markAsWatched(url);
    }

    saveProgress(url, currentTime, duration);
  }
});


      player.on('ended', () => {
        if (Array.isArray(episodes) && currentIndex + 1 < episodes.length) {
          playEpisode(episodes[currentIndex + 1].url, episodes, currentIndex + 1);
          renderEpisodeList(episodes, currentIndex + 1);
        }
      });
    });
  }
}



    document.getElementById('prevChannelBtn').addEventListener('click', () => {

  const channels = getChannels();
  if (currentChannelIndex !== null) {
    const prevIndex = (currentChannelIndex - 1 + channels.length) % channels.length;
    watchChannel(prevIndex);
  }
});

document.getElementById('nextChannelBtn').addEventListener('click', () => {
  const channels = getChannels();
  if (currentChannelIndex !== null) {
    const nextIndex = (currentChannelIndex + 1) % channels.length;
    watchChannel(nextIndex);
  }
});


    function importChannels() {
      const fileInput = document.getElementById('importFile');
      const file = fileInput.files[0];
      if (!file) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå");

      const reader = new FileReader();
      reader.onload = function (e) {
        try {
          const imported = JSON.parse(e.target.result);
          if (Array.isArray(imported)) {
            localStorage.setItem('channels', JSON.stringify(imported));
            loadChannels();
            alert("‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡πà‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‚úÖ");
          } else {
            throw new Error("‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
          }
        } catch (err) {
          alert("‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‚ùå: " + err.message);
        }
      };
      reader.readAsText(file);
    }

    

    loadChannels();
    toggleInputType(); 

    document.getElementById('search').addEventListener('focus', () => {
  const searchValue = document.getElementById('search').value.toLowerCase().trim();
  const channels = getChannels();
  const suggestionsEl = document.getElementById('searchSuggestions');

  suggestionsEl.innerHTML = '';
  channels.forEach((ch, i) => {
    if (searchValue && ch.name.toLowerCase().includes(searchValue)) {
      const item = document.createElement('div');
      item.style.display = 'flex';
      item.style.alignItems = 'center';
      item.style.padding = '8px 12px';
      item.style.cursor = 'pointer';
      item.style.borderBottom = '1px solid #333';
      item.style.transition = 'background 0.2s';

      item.onmouseenter = () => item.style.background = '#333';
      item.onmouseleave = () => item.style.background = 'transparent';

      item.onclick = () => {
        document.getElementById('search').value = ch.name;
        suggestionsEl.style.display = 'none';
        watchChannel(i);
      };

      item.innerHTML = `
        <img src="${ch.logo}" alt="${ch.name}" style="width: 32px; height: 32px; border-radius: 4px; margin-right: 10px; object-fit: cover;" onerror="this.src='https://cdn-icons-png.flaticon.com/512/2748/2748558.png'">
        <span style="color: white; font-size: 0.95rem;">${ch.name}</span>
      `;

      suggestionsEl.appendChild(item);
    }
  });

  // ‚úÖ ‡πÅ‡∏™‡∏î‡∏á dropdown ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
  suggestionsEl.style.display = suggestionsEl.children.length > 0 ? 'block' : 'none';
});


    document.addEventListener('click', (e) => {
  const searchBox = document.getElementById('search');
  const suggestionsBox = document.getElementById('searchSuggestions');
  if (!searchBox.contains(e.target) && !suggestionsBox.contains(e.target)) {
    suggestionsBox.style.display = 'none';
  }
});


    window.addEventListener('DOMContentLoaded', () => {
  const scrollToTopBtn = document.getElementById('scrollToTopBtn');
  const scrollToBottomBtn = document.getElementById('scrollToBottomBtn');

  window.addEventListener('scroll', () => {
    const scrolled = window.scrollY;
    const fullHeight = document.documentElement.scrollHeight;
    const clientHeight = window.innerHeight;

    // ‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á 2 ‡∏õ‡∏∏‡πà‡∏°
    scrollToTopBtn.style.display = scrolled > 300 ? 'block' : 'none';
    scrollToBottomBtn.style.display = (scrolled + clientHeight) < fullHeight - 300 ? 'block' : 'none';
  });

  scrollToTopBtn.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  scrollToBottomBtn.addEventListener('click', () => {
    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
  });
});

let navTimeout = null;

function showNavButtons() {
  const modal = document.querySelector('.video-modal');
  modal.classList.add('show-nav');

  if (navTimeout) clearTimeout(navTimeout);

  navTimeout = setTimeout(() => {
    modal.classList.remove('show-nav');
  }, 5000);
}

document.querySelector('.video-modal').addEventListener('mousemove', showNavButtons);

// ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
window.addEventListener('DOMContentLoaded', () => {
  console.log('‚ö° ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ channel ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô googlecdnforstreaming.live');

  let channels = JSON.parse(localStorage.getItem('channels') || '[]');

  channels = channels.filter(c => {
    return !(c.url && c.url.startsWith('https://cdn1.googlecdnforstreaming.live'));
  });

  localStorage.setItem('channels', JSON.stringify(channels));

  console.log(`‚úÖ ‡∏•‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${channels.length} ‡∏ä‡πà‡∏≠‡∏á`);

  // ‡πÇ‡∏´‡∏•‡∏î‡∏ä‡πà‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
  loadChannels();
});


  

window.electronAPI.onNewSniffedUrl((data) => {
  console.log('üì• ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Sniff:', data);

  const channels = JSON.parse(localStorage.getItem('channels') || '[]');

  const index = channels.findIndex(c => c.name === data.name);
  if (index !== -1) {
    channels[index].url = data.url;
  } else {
    channels.push({
      name: data.name,
      logo: data.logo,
      url: data.url
    });
  }

  localStorage.setItem('channels', JSON.stringify(channels));
  loadChannels();
});

  </script>
<div id="scrollButtons">
  <button id="scrollToTopBtn" title="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ö‡∏ô‡∏™‡∏∏‡∏î">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
      <path d="M12 4L6 10H10V20H14V10H18L12 4Z" fill="white"/>
    </svg>
  </button>

  <button id="scrollToBottomBtn" title="‡πÑ‡∏õ‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
      <path d="M12 20L18 14H14V4H10V14H6L12 20Z" fill="white"/>
    </svg>
  </button>
</div>





</body>
</html>
