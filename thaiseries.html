<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>playlist123</title>
  <style>
    body {
      background-color: #FFFFFF;
      font-family: monospace;
      padding: 1rem;
    }
    pre {
      white-space: pre-wrap;
      word-wrap: break-word;
      background: #f3f3f3;
      padding: 1rem;
      border-radius: 10px;
    }
  </style>
</head>
<body>

<h2>üîä Playlist ‡∏£‡∏ß‡∏°</h2>
<pre id="playlistOutput">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î playlist...</pre>

<script>
  const loginUrl = 'https://cloud.ufxtv.com/api/user/login/?user_email=BE0268&user_password=1111&kauth=';
  const playBaseUrl = 'https://cloud.ufxtv.com/api/tv/channels/play/?c=uflix-epl1&kauth=';

  const staticPlaylist = `
#EXTINF:-1 group-title="‡∏Ñ‡∏∏‡∏ì‡∏û‡∏µ‡πà‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≤‡∏î‡∏¥‡∏â‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏´‡πà‡∏≤‡∏ô‡∏°‡∏¥‡πÉ‡∏ä‡πà‡∏´‡∏á‡∏™‡πå" tvg-logo="https://www.123-hd.com/wp-content/uploads/2025/01/Good-Heavens-Im-a-Goose-not-a-Swan-300x450.jpg",Good Heavens I‚Äôm a Goose not a Swan EP01
#EXTVLCOPT:http-referer=https://www.123-hd.com/
https://main.24playerhd.com/newplaylist/d32476b5eca80327cc776bdd/d32476b5eca80327cc776bdd.m3u8
`;

  async function getPlaylist(user_loggedsession) {
    const playUrl = `${playBaseUrl}&user_loggedsession=${user_loggedsession}`;
    const response = await fetch(playUrl);
    const text = await response.text();
    return text.includes('<clear_url>') ? text : null;
  }

  async function login() {
    const response = await fetch(loginUrl);
    const text = await response.text();
    const sessionMatch = text.match(/<user_loggedsession>(.*?)<\/user_loggedsession>/);
    return sessionMatch ? sessionMatch[1] : null;
  }

  function extractClearUrl(xml) {
    const match = xml.match(/<clear_url>(.*?)<\/clear_url>/);
    return match ? match[1] : null;
  }

  function renderPlaylist(dynamicUrl) {
    const fixedUrl = dynamicUrl.replace('playlist.m3u8', 'chunks.m3u8');

    const fullPlaylist = `
#EXTM3U

########################################
Thai Series
########################################
${staticPlaylist.trim()}

########################################
‡∏Å‡∏µ‡∏¨‡∏≤ - Uflix
########################################
#EXTINF:-1 group-title="‡∏Å‡∏µ‡∏¨‡∏≤" tvg-logo="https://static.uflixtv.com/images/tv/channels_icons/epl-1.png",EPL-1
${fixedUrl}
`;

    document.getElementById('playlistOutput').textContent = fullPlaylist.trim();
  }

  // Main
  (async () => {
    let session = 'dhEVBSnVeab9ebnJzrC3WeiYsBuJWaaTuuBNJow3ux8izAVVO767f23918d76a4';
    let xml = await getPlaylist(session);

    if (!xml) {
      session = await login();
      if (!session) {
        document.getElementById('playlistOutput').textContent = "‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ";
        return;
      }
      xml = await getPlaylist(session);
    }

    const clearUrl = extractClearUrl(xml);
    if (clearUrl) {
      renderPlaylist(clearUrl);
    } else {
      document.getElementById('playlistOutput').textContent = "‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå playlist";
    }
  })();
</script>

</body>
</html>
